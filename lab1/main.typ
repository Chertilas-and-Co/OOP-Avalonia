#import "conf.typ" : conf
#show: conf.with(
  title: [= Лабораторная работа №1
Визуальное проектирование в С\#],
  type: "pract",
  info: (
      author: (
        name: [],
        faculty: [],
        group: "",
        sex: ""
      ),
      inspector: (
        degree: "",
        name: ""
      )
  ),
  settings: (
    title_page: (
      enabled: true
    ),
    contents_page: (
      enabled: true
    )
  )
)

= Начало работы с Avalonia
== Настройка окна приложения

После создания проекта Avalonia App у вас автоматически появится главное окно --- MainWindow.axaml, а также связанный с ним файл кода MainWindow.axaml.cs.
Файл .axaml содержит описание пользовательского интерфейса в формате XAML, а файл .axaml.cs --- код на C\#, в котором можно обрабатывать события элементов интерфейса.

Изменять свойства окна можно двумя способами:
-	через XAML (описание разметки);
-	через код C\# (в классе MainWindow).

Пример изменения заголовка и размеров окна:
```xaml
<Window xmlns="https://github.com/avaloniaui"
        Title="Лаба №1. ФИО, группа"
        Width="400" Height="300">
</Window>
```

Цвет фона объекта можно задать свойством Background:
```xaml
<Window Background="AntiqueWhite">
```

Также можно задать и цвет текста:
```xaml
<Window Background="AntiqueWhite" Foreground="Blue">
```

== Размещение элементов интерфейса

Элементы управления (кнопки, поля ввода, надписи и т.д.) размещаются внутри контейнеров разметки Avalonia.
Наиболее распространённые контейнеры:
-	StackPanel --- размещает элементы в ряд вертикально или горизонтально;
  Пример:
  ```xaml
  <StackPanel Margin="10">
      <TextBlock Text="Введите значение:"/>

      <TextBox Name="textBox1"/>

      <Button Content="Выполнить" Click="OnButtonClick"/>
  </StackPanel>
  ```
- Grid --- разбивает пространство окна на сетку со строками и столбцами. Элементы можно размещать, указывая, в какой строке и столбце они находятся.
  Пример:
  ```xaml
  <Grid RowDefinitions="Auto,Auto,Auto,Auto" ColumnDefinitions="Auto,*" Margin="10">
      <TextBlock Text="Введите значение:" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center"/>
      <TextBox Name="textBox1" Grid.Row="0" Grid.Column="1"/>
      <Button Content="Выполнить" Click="OnButtonClick"/>
  </Grid>
  ```
  -	RowDefinitions и ColumnDefinitions задают сетку: здесь 4 строки (по высоте --- Auto) и 2 столбца (первый узкий, второй растягивается --- \*);
  -	Grid.Row и Grid.Column указывают позицию элемента в сетке;
  -	Grid.ColumnSpan="2" позволяет занять обе колонки (например, кнопкой).
-	Canvas --- позволяет позиционировать элементы по абсолютным координатам. Каждый элемент имеет свойства Canvas.Left, Canvas.Top, Canvas.Right, Canvas.Bottom.
  Пример:
  ```xaml
  <Canvas>
      <TextBlock Text="Введите значение:" Canvas.Left="10" Canvas.Top="20"/>
      <TextBox Name="textBox1" Width="100" Canvas.Left="150" Canvas.Top="15"/>
      <Button Content="Выполнить" Width="120"
              Canvas.Left="10" Canvas.Top="150"
              Click="OnButtonClick"/>
  </Canvas>
  ```
  -	Используется абсолютное позиционирование --- каждая координата задаётся вручную;
  -	Такой способ удобен для простых макетов, где нужно точно контролировать расположение элементов.	Однако для адаптивных интерфейсов лучше использовать Grid или StackPanel.

== Размещение строки ввода (TextBox)

Для ввода текстовых или числовых данных используется элемент TextBox.

Пример размещения трёх полей ввода:
```xaml
<StackPanel Margin="10">
    <TextBox Name="textBox1"/>
    <TextBox Name="textBox2"/>
    <TextBox Name="textBox3"/>
</StackPanel>
```

Получить введённый текст можно в C\# коде:
```cs
string s = textBox1.Text;
```

Задать шрифт можно в XAML:
```xaml
<TextBox FontSize="16" FontFamily="Arial"/>
```

== Размещение надписей (TextBlock)

В Avalonia вместо Label чаще используется TextBlock --- элемент, который отображает текстовые надписи.
Внимание: не путать TextBlock и TextBox, TextBlock используется для вывода текста, а TextBox --- для ввода.

Пример:
```xaml
<TextBlock Text="Введите значение X:" FontSize="16"/>
```

== События и обработчики

Каждый элемент интерфейса может вызывать события (например, Click у кнопки).
Чтобы обработать событие, в XAML указывается имя метода, а сам метод реализуется в файле .axaml.cs.

=== Обработка события нажатия кнопки (Click)

Пример:
```xaml
<Button Name="button1" Content="Выполнить" Click="OnButtonClick"/>

private void OnButtonClick(object? sender, RoutedEventArgs e)
{
    MessageBox.Avalonia.MessageBoxManager
        .GetMessageBoxStandardWindow("Сообщение", "Привет!")
        .Show();
}
```

=== Обработка события загрузки окна (Opened)

Событие, аналогичное Load в WinForms, --- это Opened в Avalonia.
```xaml
<Window xmlns="https://github.com/avaloniaui"
        Title="..."
        Opened="OnWindowOpened">

private void OnWindowOpened(object? sender, EventArgs e)
{
    this.Background = Brushes.AntiqueWhite;
}
```

== Запуск и работа программы

Программу можно запускать из любой IDE или терминала командой:
  ```sh
dotnet run
```

После успешной сборки появится окно приложения Avalonia.
Для завершения программы просто закройте окно.

== Динамическое изменение свойств

Свойства элементов можно менять в коде во время выполнения:
```cs
textBlock1.Text = "Привет!";
this.Background = Brushes.LightBlue;
```

== Индивидуальные задания
Ниже приведено 14 вариантов задач. 
-	Все элементы интерфейса (кнопки, поля ввода, текстовые надписи и т.п.) размещайте в окне MainWindow.axaml.
-	Если в тексте задания явно не указано иное, то для разметки интерфейса можно использовать любой контейнер: StackPanel, Grid или Canvas.
-	Для визуальных надписей используйте TextBlock, для ввода данных --- TextBox, для интерактивных действий --- Button.
-	Изменение свойств (текста, цвета, видимости и т.д.) выполняйте в коде MainWindow.axaml.cs.
-	События в Avalonia связываются через атрибуты XAML (например Click="OnButtonClick") или через привязку в коде.

1. Разместите в окне четыре кнопки (Button). Сделайте на кнопках следующие надписи: Красный, Зелёный, Синий, Жёлтый. Создайте четыре обработчика события Click, которые будут менять цвет окна (this.Background) в соответствии с текстом на кнопке.
2. Разместите в окне две кнопки (Button) и одну надпись (TextBlock). Сделайте на кнопках надписи: "Привет", "До свидания". Создайте обработчики события Click для этих кнопок, которые будут изменять текст надписи (TextBlock.Text) с одного на другой. Создайте обработчик события загрузки окна (Opened), который установит цвет фона окна и изменит текст надписи на строку "Начало работы".
3. Разместите в окне две кнопки (Button) и одну надпись (TextBlock). Сделайте на кнопках надписи: "Скрыть", "Показать". Создайте обработчики событий Click, которые будут скрывать или показывать надпись (через свойство IsVisible). Создайте обработчик события загрузки окна (Opened), который установит цвет фона окна и изменит текст надписи на строку "Начало работы".
4. Разместите в окне три кнопки (Button) и одно поле ввода (TextBox). Сделайте на кнопках надписи: Скрыть, Показать, Очистить. Создайте обработчики событий Click, которые будут скрывать (IsVisible = true), показывать поле ввода (IsVisible = false) и очищать содержимое поля (Text = "").
5. Разместите в окне две кнопки (Button) и одно поле ввода (TextBox). Сделайте на кнопках надписи: Заполнить, Очистить. Создайте обработчики событий Click, которые будут очищать поле (Text = "") и заполнять его символами "\*\*\*\*\*\*". Создайте обработчик события загрузки окна (Opened), который установит цвет фона окна и задаст текст поля "+++++".
6. Разработайте простую игру. На окне разместите пять кнопок (Button). При нажатии на любую кнопку некоторые кнопки должны становиться видимыми (IsVisible = true), а некоторые --- невидимыми (IsVisible = false). Цель игры --- скрыть все кнопки.
7. Разработайте игру, в которой на окне размещены четыре кнопки (Button) и четыре надписи (TextBlock). При нажатии на любую кнопку часть надписей становится невидимой, а часть --- видимой. Цель игры --- скрыть все надписи.
8. Разместите на окне несколько кнопок (Button). Создайте обработчики событий Click, которые будут делать нажатую кнопку неактивной (IsEnabled = false). Создайте обработчик события изменения размера окна (Resized), который будет устанавливать всем кнопкам состояние активное (IsEnabled = true).
9. Разместите на окне ряд кнопок (Button). Создайте обработчики событий Click, которые будут делать неактивной следующую кнопку. Создайте обработчик события нажатия кнопки мыши на окне (PointerPressed), который будет устанавливать всем кнопкам активное состояние (IsEnabled = true).
10. Разместите на окне три кнопки (Button) и одно поле ввода (TextBox). Сделайте на кнопках надписи: "\*\*\*\*\*", "+++++", "00000". Создайте обработчики событий Click, которые будут выводить текст с кнопки в поле ввода (TextBox.Text = button.Content.ToString()). Создайте обработчик события загрузки окна (Opened), который установит цвет фона окна и задаст текст "Готов к работе" в поле ввода.
11. Разместите на окне несколько полей ввода (TextBox). Создайте обработчики события нажатия кнопки мыши на данные поля ввода (PointerPressed), которые будут выводить в текущее поле его номер. Создайте обработчик события изменения размера окна (Resized), который будет очищать все поля ввода (Text = "").
12. Разместите на окне одно поле ввода (TextBox), одну надпись (TextBlock) и одну кнопку (Button). Создайте обработчик события Click для кнопки, который будет копировать текст из поля ввода в надпись. Создайте обработчик события нажатия кнопки мышки на окне (PointerPressed), который будет устанавливать цвет фона, изменять текст надписи на «Начало работы» и очищать поле ввода.
13. Разместите на окне одно поле ввода (TextBox) и две кнопки (Button) с надписями Блокировать и Разблокировать. Создайте обработчики событий Click, которые будут делать поле ввода активным или неактивным (IsEnabled). Создайте обработчик события нажатия кнопки мышки на окне (PointerPressed), который будет изменять цвет фона и делать все элементы окна невидимыми (IsVisible = false).
14. Разместите на окне четыре кнопки (Button). Создайте для каждой обработчик события Click, который будет изменять размеры (Width, Height) и положение (Canvas.Left, Canvas.Top) других кнопок на окне. Для позиционирования используйте контейнер Canvas.
